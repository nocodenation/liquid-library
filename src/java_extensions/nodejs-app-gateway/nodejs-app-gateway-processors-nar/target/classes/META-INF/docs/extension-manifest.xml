<?xml version="1.0" encoding="UTF-8"?>
<extensionManifest>
    <groupId>org.nocodenation.nifi</groupId>
    <artifactId>nodejs-app-gateway-processors-nar</artifactId>
    <version>1.0.0-SNAPSHOT</version>
    <parentNar>
        <groupId>org.nocodenation.nifi</groupId>
        <artifactId>nodejs-app-gateway-service-api-nar</artifactId>
        <version>1.0.0-SNAPSHOT</version>
    </parentNar>
    <systemApiVersion>2.0.0</systemApiVersion>
    <buildInfo>
        <tag>1.0.0-SNAPSHOT</tag>
        <branch>main</branch>
        <revision>1</revision>
    </buildInfo>
    <extensions>
        <extension>
            <name>org.nocodenation.nifi.nodejsapp.gateway.ReceiveFromNodeJSApp</name>
            <type>PROCESSOR</type>
            <description>Receives HTTP requests from Node.js applications via the NodeJSAppAPIGateway controller service. Registers an endpoint pattern and creates FlowFiles for incoming requests with HTTP details as attributes.</description>
            <tags>
                <tag>nodejs</tag>
                <tag>http</tag>
                <tag>gateway</tag>
                <tag>api</tag>
                <tag>rest</tag>
            </tags>
            <properties>
                <property>
                    <name>Gateway Service</name>
                    <displayName>Gateway Service</displayName>
                    <description>The NodeJSAppAPIGateway controller service to use</description>
                    <controllerServiceDefinition>
                        <className>org.nocodenation.nifi.nodejsapp.gateway.NodeJSAppAPIGateway</className>
                        <groupId>org.nocodenation.nifi</groupId>
                        <artifactId>nodejs-app-gateway-service-api-nar</artifactId>
                        <version>1.0.0-SNAPSHOT</version>
                    </controllerServiceDefinition>
                    <required>true</required>
                    <sensitive>false</sensitive>
                    <expressionLanguageSupported>false</expressionLanguageSupported>
                    <expressionLanguageScope>NONE</expressionLanguageScope>
                    <dynamicallyModifiesClasspath>false</dynamicallyModifiesClasspath>
                    <dynamic>false</dynamic>
                </property>
                <property>
                    <name>Endpoint Pattern</name>
                    <displayName>Endpoint Pattern</displayName>
                    <description>One or more endpoint patterns to register, comma-separated (e.g., /api/events or /api/users/:userId, /api/products/:productId)</description>
                    <required>true</required>
                    <sensitive>false</sensitive>
                    <expressionLanguageSupported>true</expressionLanguageSupported>
                    <expressionLanguageScope>ENVIRONMENT</expressionLanguageScope>
                    <dynamicallyModifiesClasspath>false</dynamicallyModifiesClasspath>
                    <dynamic>false</dynamic>
                </property>
                <property>
                    <name>Response Status Code</name>
                    <displayName>Response Status Code</displayName>
                    <description>HTTP status code to return (default: 202 Accepted)</description>
                    <defaultValue>202</defaultValue>
                    <required>true</required>
                    <sensitive>false</sensitive>
                    <expressionLanguageSupported>false</expressionLanguageSupported>
                    <expressionLanguageScope>NONE</expressionLanguageScope>
                    <dynamicallyModifiesClasspath>false</dynamicallyModifiesClasspath>
                    <dynamic>false</dynamic>
                </property>
                <property>
                    <name>Response Body</name>
                    <displayName>Response Body</displayName>
                    <description>Optional response body to send back to the client</description>
                    <required>false</required>
                    <sensitive>false</sensitive>
                    <expressionLanguageSupported>true</expressionLanguageSupported>
                    <expressionLanguageScope>FLOWFILE_ATTRIBUTES</expressionLanguageScope>
                    <dynamicallyModifiesClasspath>false</dynamicallyModifiesClasspath>
                    <dynamic>false</dynamic>
                </property>
            </properties>
            <relationships>
                <relationship>
                    <name>success</name>
                    <description>Successfully received requests</description>
                    <autoTerminated>false</autoTerminated>
                </relationship>
                <relationship>
                    <name>failure</name>
                    <description>Failed to process requests</description>
                    <autoTerminated>false</autoTerminated>
                </relationship>
            </relationships>
            <writesAttributes>
                <writesAttribute>
                    <name>http.method</name>
                    <description>HTTP method (GET, POST, PUT, DELETE, etc.)</description>
                </writesAttribute>
                <writesAttribute>
                    <name>http.path</name>
                    <description>Request path</description>
                </writesAttribute>
                <writesAttribute>
                    <name>http.query.*</name>
                    <description>Query parameters (e.g., http.query.id)</description>
                </writesAttribute>
                <writesAttribute>
                    <name>http.path.*</name>
                    <description>Path parameters (e.g., http.path.userId)</description>
                </writesAttribute>
                <writesAttribute>
                    <name>http.header.*</name>
                    <description>HTTP headers (e.g., http.header.content-type)</description>
                </writesAttribute>
                <writesAttribute>
                    <name>http.client.address</name>
                    <description>Client IP address</description>
                </writesAttribute>
                <writesAttribute>
                    <name>http.timestamp</name>
                    <description>Request timestamp (ISO-8601)</description>
                </writesAttribute>
            </writesAttributes>
            <inputRequirement>INPUT_FORBIDDEN</inputRequirement>
            <additionalDetails>docs/org.nocodenation.nifi.nodejsapp.gateway.ReceiveFromNodeJSApp/additionalDetails.html</additionalDetails>
        </extension>
    </extensions>
</extensionManifest>
